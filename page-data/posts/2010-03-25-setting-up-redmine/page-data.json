{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/posts/2010-03-25-setting-up-redmine","webpackCompilationHash":"c8ed51f8e74f03200d92","result":{"data":{"site":{"siteMetadata":{"title":"Excursion in Distraction","author":"@dsvensson"}},"markdownRemark":{"html":"<p>About one and a half years ago I got tired of using Trac and started looking for alternatives. There were (are?) a lot of issues with Trac, but one of the more visible usability problems is that you write filters in SQL. As I’m accustomed to filters in a fire-and-forget fashion, from my years with the Mantis BTS, this doesn’t really work for me. The Almighty Google Machine led me to a heap of people recommending Redmine as a drop-in replacement, with nice import scripts. A couple of days later I’d created my first Redmine instance and have not since looked back.</p>\n<p>We’ve also started using Redmine in my project at work, and now the other projects are getting jealous on our fancy setup, hence this post.</p>\n<p>Pre-reqs: One piece of hardware with Debian Lenny installed.</p>\n<p>First start with adding the Debian Backports Apt repository to your sources.list:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"deb http://www.backports.org/debian lenny-backports <span class=\"token entity\" title=\"\\\\\">\\\\</span>\n                      main contrib non-free\"</span> <span class=\"token operator\">>></span> /etc/apt/sources.list\n$ <span class=\"token function\">aptitude</span> update\n$ <span class=\"token function\">aptitude</span> <span class=\"token function\">install</span> debian-backports-keyring\n$ <span class=\"token function\">aptitude</span> update</code></pre></div>\n<p>Next up you’ll need an Apache module with a very fancy web page, <a href=\"http://www.modrails.com/\" title=\"Passenger\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Passenger</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">aptitude</span> -t lenny-backports <span class=\"token function\">install</span> libapache2-mod-passenger</code></pre></div>\n<p>You’re also going to need some database to store your crap in. I’m just going to base this on MySQL as that’s the DB that was already running on those machines I run Redmine on, and there’s no specific reason why I select version 5.1 here either:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">aptitude</span> -t lenny-backports <span class=\"token function\">install</span> mysql-server-5.1</code></pre></div>\n<p>During the installation you’ll be asked to enter a password for the root account on the MySQL database server. If you’re out of ideas I can really recommend installing the <code class=\"language-text\">pwgen</code> package which will happily generate a secure password for you:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ pwgen -sy <span class=\"token operator\">|</span> <span class=\"token function\">cat</span></code></pre></div>\n<p>Armed with a MySQL database and a secure password it’s now time to create the Redmine database:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ mysql -u root -p</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">mysql<span class=\"token operator\">></span> <span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">DATABASE</span> redmine <span class=\"token keyword\">CHARACTER</span> <span class=\"token keyword\">SET</span> UTF8<span class=\"token punctuation\">;</span>\nQuery OK<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> <span class=\"token keyword\">row</span> affected <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span>\nmysql<span class=\"token operator\">></span> <span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">USER</span> <span class=\"token string\">'redmine'</span><span class=\"token variable\">@'localhost'</span> IDENTIFIED <span class=\"token keyword\">BY</span> <span class=\"token string\">'my_password'</span><span class=\"token punctuation\">;</span>\nQuery OK<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span> <span class=\"token keyword\">rows</span> affected <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span>\nmysql<span class=\"token operator\">></span> <span class=\"token keyword\">GRANT</span> <span class=\"token keyword\">ALL</span> <span class=\"token keyword\">PRIVILEGES</span> <span class=\"token keyword\">ON</span> redmine<span class=\"token punctuation\">.</span><span class=\"token operator\">*</span> <span class=\"token keyword\">TO</span> <span class=\"token string\">'redmine'</span><span class=\"token variable\">@'localhost'</span><span class=\"token punctuation\">;</span>\nQuery OK<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span> <span class=\"token keyword\">rows</span> affected <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span>\nmysql<span class=\"token operator\">></span> <span class=\"token keyword\">exit</span>\nBye</code></pre></div>\n<p>…where you’d obviously use that fancy <code class=\"language-text\">pwgen</code> tool to generate yet another super secure password that you’ll forget before reading the rest of this text.</p>\n<p>Armed with a database and a Ruby on Rails hungry Apache module you’re now ready to grab Redmine:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token builtin class-name\">cd</span> /var/www\n$ <span class=\"token function\">wget</span> http://rubyforge.org/frs/download.php/69449/redmine-0.9.3.tar.gz\n$ <span class=\"token function\">tar</span> xvfz redmine-0.9.3.tar.gz</code></pre></div>\n<p>Now it’s time to remember that fancy password of yours:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token builtin class-name\">cd</span> redmine-0.9.3\n$ <span class=\"token function\">cat</span> <span class=\"token operator\">></span> config/database.yml <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">EOF\nproduction:\n  adapter: mysql\n  database: redmine\n  host: localhost\n  username: redmine\n  password: my-sikritt-passw0rd\nEOF</span></code></pre></div>\n<p>Ok, so now Redmine is configured to access the database, but Rails is missing, lets grab it:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ gem <span class=\"token function\">install</span> rails -v<span class=\"token operator\">=</span><span class=\"token number\">2.3</span>.5\n$ <span class=\"token function\">aptitude</span> <span class=\"token function\">install</span> libopenssl-ruby libmysql-ruby</code></pre></div>\n<p>Got Rails! Next up, prepare Redmine, and then populate the database:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token assign-left variable\">RAILS_ENV</span><span class=\"token operator\">=</span>production rake config/initializers/session_store.rb\n$ <span class=\"token assign-left variable\">RAILS_ENV</span><span class=\"token operator\">=</span>production rake db:migrate\n$ <span class=\"token assign-left variable\">RAILS_ENV</span><span class=\"token operator\">=</span>production rake redmine:load_default_data</code></pre></div>\n<p>The last step here will ask for the default language, select something you can understand.</p>\n<p>Ok, we’re getting closer to actually run Redmine for the first time. The following steps will hook up Redmine to be run by Apache:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">chown</span> -R www-data:www-data files log tmp public/plugin_assets\n$ <span class=\"token function\">mv</span> public/.htaccess public/.disabled_htaccess\n$ <span class=\"token function\">cat</span> <span class=\"token operator\">></span> /etc/apache2/sites-available/redmine <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">EOF\n&lt;VirtualHost _default_:80>\n ServerName your.domain.name\n DocumentRoot /var/www/redmine-0.9.3/public\n RailsEnv production\n&lt;/VirtualHost>\nEOF</span>\n$ a2ensite redmine\n$ /etc/init.d/apache2 restart</code></pre></div>\n<p>When directing your browser to <a href=\"http://your.domain.name\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://your.domain.name</a> Redmine will present itself. You should of course make sure that the rest of your Apache installation works properly now and no strange directories are exposed to evil visitors, but otherwise you should be good to go.. enjoy!</p>","fields":{"slug":"posts/2010-03-25-setting-up-redmine","readingTime":{"text":"4 min read"}},"frontmatter":{"title":"Setting up Redmine","date":"25 Mar '10"}},"headerImage":{"childImageSharp":{"fluid":{"tracedSVG":"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='400' height='27'%3e%3cpath d='M2 1L1 13l-1 6c0 4 0 4 3 4 2 0 2 0 1 1H1l-1 1c0 2 3 2 15 2h14v-5c0-5-1-6-3-4v3c0 1-2 2-5 2l-4 1-2 1-2-1c0-2 6-4 9-4 3 1 3-1-1-2-3 0-1-2 4-2 3 0 4-1 4-3l-1-3H16C5 10 5 10 5 3c0-3-2-4-3-2m32 13v13h9c7 0 9 0 9-2 0 0-1-2-3-2-3-1-3-1-2-8V9h-3l-4 1V5c0-5 0-5-3-5h-2l-1 14m20-2v11h4c3 0 4 0 5 2 0 2 1 2 14 2 16 0 15 1 15-11 0-8 1-12 3-12l1 10c0 6 0 9 1 8 1-2 1-2 1 0 1 1 1 2 2 1l2 1 1 2V4c0-3-1-4-6-4-6 0-6 0-5 2 0 4-8 7-20 7h-9V0h-9v12m57-5c-1 8 0 14 4 17v1l-2 1 14 1 14-1h2l10 1c11 0 11 1 11-22V0l-2 3-2 4c1 1 0 1-3 1l-7 1-5-1c-3-3-2-5 1-5l3-1h-3l-3-1-2-1-1 1c1 0-1 3-3 3l-3-2c-3-2-4-2-9-2h-11c-3 0-3 0-3 7m68-4c0 3 0 3 2 1 0-1 2-2 3-1 1 0 1 1-1 3-2 1-2 2-1 2v1l-1 3c0 1-1 2-2 1v6c0 1 1 2 5 2 7 2 8 2 2 2l-6 1h2l3 1c0 1 2 2 10 2 9 0 10 0 10-2 0-1 1-2 3-2h3V0h-33l1 3m36-2c-2 2 0 26 1 26v-1c0-2 1-2 3 0l9 1h8l-2-3-1-2c1-1-6-14-7-13-2 1-5-1-5-5-1-3-1-3-2-1l-1 3V3c0-2-2-4-3-2m99 0c-1 2 3 8 5 9v3l-1-1-2-1 1 2v2c-2 1-2 1-2-1s0-2-1-1h-2l-1 2 1 2 1-1h1l-1 2-1 3-2-3c-2-2-7-2-5 0h2l1 1-3 1c-2 0-2 0-2 2l1 3c0 2 1 2 48 2h48V15c0-10 0-11-2-11-1 0-2 0-2-2 0-3-9-3-11 0v2h-1l-1 1c-1 1-1 0-1-2 1-4-1-4-2 0 0 2-1 2-1 1V2c0-2 0-2-1-1l-2 1c1 4-1 6-4 5-4 0-6-2-3-2 2 0 2 0 1-1-2 0-2-1-1-2l2 1c0 2 1 1 3-1 1-2 0-2-3-2l-7 2c-2 1-2 2-1 2h2l-2 1-2 2 2 1c2-1 4 0 4 2l-5 1-6 1h-1l2-2 1-2-2-4V0h-9c-9 0-10 0-10 2l-1 3V2c0-2-1-2-3-2l-3 1h-2c-2-1-7-1-7 1l1 1v1c0 2-2 0-2-2s-5-3-6-1m-44 7l-1 1c-1-1-1 1-1 3 0 4 0 4-1 1 0-3-1-3-5-4l-6-1c-1 0-1 4 1 10l2 6c1 3 1 3 11 3 7 0 9 0 9-2v-3l-2-2-2-5-3-5c-1-4-2-5-2-2' fill='%23d3d3d3' fill-rule='evenodd'/%3e%3c/svg%3e","aspectRatio":14.867924528301886,"src":"/static/843c5f7defd25c41f8cae57182fd6f1f/1bdc6/wastelands-header.jpg","srcSet":"/static/843c5f7defd25c41f8cae57182fd6f1f/accda/wastelands-header.jpg 200w,\n/static/843c5f7defd25c41f8cae57182fd6f1f/fc61b/wastelands-header.jpg 400w,\n/static/843c5f7defd25c41f8cae57182fd6f1f/1bdc6/wastelands-header.jpg 800w,\n/static/843c5f7defd25c41f8cae57182fd6f1f/34bdc/wastelands-header.jpg 1200w,\n/static/843c5f7defd25c41f8cae57182fd6f1f/bdccb/wastelands-header.jpg 1600w,\n/static/843c5f7defd25c41f8cae57182fd6f1f/0ffcb/wastelands-header.jpg 3940w","sizes":"(max-width: 800px) 100vw, 800px"}}},"indexImage":null},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"posts/2010-03-25-setting-up-redmine","previous":{"fields":{"slug":"posts/2010-03-15-androidified"},"frontmatter":{"title":"Androidified"}},"next":{"fields":{"slug":"posts/2010-07-22-the-garbage-garbage-collector-of-python"},"frontmatter":{"title":"The Garbage Garbage Collector of Python"}}}}}